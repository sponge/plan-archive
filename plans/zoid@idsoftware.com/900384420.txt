Welcome to id Software's Finger Service V1.5!

Name: Dave Kirsch
Email: zoid@idsoftware.com
Description: Programmer
Project: 
Last Updated: 07/13/1998 22:07:20 (Central Standard Time)
-------------------------------------------------------------------------------
Jul 13th/1998

I've released a public BETA of QuakeWorld 2.29.  This release is not 
compatible with previous versions.  Please note that this is a beta only
release and not meant for general use.

You may get the BETA from:


ftp://ftp.idsoftware.com/idstuff/quakeworld/beta/qw229BETA.zip


This 2.29 BETA release contains servers and clients for Windows (Win32) and
Linux i386 ONLY.

I'm looking for bug reports and suggestions about this new release.  This
2.29 version should address the problems that were present in the 2.21 
release.  Once the beta test is finished (length depends on what problems 
are found, etc), I will release a 2.30 public version.

Here is the list of changes:

- 2.1 movement code mostly restored, but sv_friction is still 4 (like NQ)
  and the gravity application matches NQ.  This should fix some bugs on maps
  people saw in 2.21 and fix some other errors.
- Complete rewrite of the reliable data handling.  NO MORE OVERFLOWS.
- Client to Server (from you to the server) data is about 25% less bandwidth
  using delta compression.  This means you can bump up your cl_maxfps by about
  20%.  This will have a minor impact on lag.
- QuakeWorld now allows one external command packet until server connection.
  This makes QPlug work again as well as older versions of QuakeSpy/GameSpy.
- In GLQWCL, the size of the eyes.mdl is double sized.  In GL, the default
  eyes model was much, much harder to see than in software.  This should
  help even it out.
- New spectator camera.  A 'through the eyes' view of the player you are
  tracking.  To enable this, type "cl_chasecam 1" when in spectator mode and
  chasing a player.

/// Zoid.
zoid@idsoftware.com

May 31st/1998

Quick note:  If you get "File not found" during the download process on a
server, that means the server doesn't have the file, so it can't download it
to you.  Customs player models and skins have to be on the server in order for
you to download them.  The message will say, "Server does not have this file."
in the 3.16 version.  If you have a nifty model, talk to the server operator
who runs favorite server so he can put it online so people can download it.

I'm working away on the 3.16 code and I noticed some interesting things
about downloading.  Most of the rest of this plan will deal with
issues of interest to mod authors for Quake2 who want to make their
mods downloadable.

I noticed in 3.15 that pics download (the stuff in the pics dir, usually
PCX files) wasn't working.  So I fixed it and noticed something since I
was using my own Q2CTF for testing.  Most of the Q2CTF pics were downloaded,
but a few weren't.  Mostly the stuff dealing with the TECH powerups (runes).
I also noticed that the various sound effects weren't downloaded, either.
Curious, I investigated.

I do list all the model, sounds and pics for the TECH powerup items in the
items array in g_item.c, so I wondered why they weren't download.  Took me a
second to think about it then I realized something.  The models, sound and
pics for the TECHs weren't precached!  This is because the TECHs are 
spawned at _after_ the map loaded and didn't go through the spawning 
functions of normal items such as weapons and ammo (the TECHs are not 'placed'
in the map like regular items).  Because of this, their data wasn't precached.

Obviously, one should consider this a bug, but it worked.  It worked because
gi.soundindex, gi.imageindex and the like notice when you ask for a sound that
doesn't exist and will automatically 'on the fly' precache them.  This has
happened after the download phase when the client connects, so he never gets
them.  What I should have done is precache the various models, sounds and pics
for the TECH powerups in the worldspawn function.  This would ensure they were
loaded up before client entered the game.

Note, that if a client connected to a game in progress, where people had been
using the various tech powerups and played their sounds, they would be in the
precache list (by being added later) and would get downloaded.  This is a
small bonus, I suppose.

Another thing to watch for is status bar pics.  The HUD scripts let you
reference various PCX files directly using the 'picn' keyword.  These images
are not precached and won't be downloaded.  So make sure to precache them in
the worldspawn function to ensure clients download the necessary pics and
don't get spammed with 'Can't find pic blah.'

Now that pics downloading actually works in 3.16, I'm going to be curious to
see what sort of custom HUD displays people come up with on their servers,
which people will automatically download as needed.  Since the pcx files are
quite small, should be very easy to build custom HUDs. Oh, to make sure people
aren't polluting the name space for pics, you should reference them in a
subdirectory.  For example, if you were making a mod called 'SNARF!', you
could put the pics in pics/snarf/blah.pcx.  This obviously doesn't apply if
you have your own game directory off the main quake2 directory.

You could even have some custom menu graphics for your mod in a PCX file
and have it downloaded.  Make it unique rather then everyone (including
myself) using the default inventory window.

I also fixed the autodownload so it downloads the seperate skin files for
models (can't believe I missed that either).

3.16 is coming along nicely and should be ready soon.

/// Zoid.


May 30th/1998

I'm working on a Quake2 3.16 version that addresses the issues that showed up
in 3.15.  There's good news and bad news.

I'll start with the bad news:

There is a server bug in the 3.15 code in respect to the packet checksumming
between server and client.  Many people have experienced it by connecting to
a server and being 'stuck' and can't move.  This is especially bad when
connecting to servers from different platforms (win32 vs linux at this time).

Because of this bug, 3.16 WILL NOT BE COMPATIBLE WITH 3.15 SERVERS.

I sincerely apologize about this, but it was unavoidable.  I endeavour to make
sure bugs like this never happen, but sometimes it slips through the cracks.  
The bug is randomly hit (due to its nature) so it didn't turn up in testing.

The good news:

Because I'm replacing the checksum code, I've switched to a much less CPU 
intensive algorithm.  Dedicated servers should use about 20% less CPU with
ten clients.  This will allow more players on a server in the future.

3.16 also includes a new setup menu in the Multiplayer/Player Setup that allows
the user to customize what he wants to download.  You can set it to just 
download maps and not player models for example.  This is nice in that you don't
spend time downloading player models and skins that you don't want or need.

The availability of the gl_modulate command in multiplayer has been restored.

Some notes about 3.15/3.16:

- Pings look higher, but the actually aren't.  3.14 and earlier versions always
undervalued pings.  3.15 calculates 'correct' ping times and includes the full
round trip time and your frame time in milleseconds.  3.15 pings are much, much
more accurate.

- Hentai has put out a new version of the VWep pack specific for 3.15 that
touches up some animations, etc.  
It's available at http://www.telefragged.com/vwep
A note to mod authors:  specially handling of Vwep is now built into the EXE
for 3.15/3.16 and requires a small game.dll change for full usage.  Once I get
3.16 out the door, I'll be releasing the specs and changes to the game.dll
source.  I moved it into the EXE so that special handling for models without
vwep automatically use the weapon.md2 and you don't get ugly triangle diapers
on players.

3.16 is only a new quake2.exe.  The same game.dll and other files are unchanged
from 3.15.  This means that 3.15 save games will not be affected.
The 3.15 checksum bug is the major reason why I don't have other platforms
(Solaris Sparc, Linux Alpha and Solaris x86) out yet.

Again, I'd like to apologize with the forced upgrade 3.16 will cause.  I'll
try to make sure it doesn't happen again.  I'll be working very hard on getting
3.16 out tomorrow for ALL platforms.

/// Zoid.


May 29th/1998

I hope everyone is enjoying Q2 3.15.  Some of the new features of the release 
should make Quake2 a lot more fun.

Of course, with any release, there's bound to be a little problem show up.
In this case, the Linux version in server mode fails packet checksums in some
cases.  (This results in your joining a linux server and you can't move, you
just jerk back to where you spawned).
I have a new Linux version out that addresses this at:

ftp://ftp.idsoftware.com/idstuff/quake2/quake2-3.15a-i386-unknown-linux2.0.tar.gz


I'll be keeping a close eye on all the Quake2 servers over the next few days
to see what's up.  I'll also be working over the next day or two to get the 
other platforms done for servers:  Linux Alpha, Solaris Sparc and Solaris x86.

I'll have new the CTF with 3.15 changes (Vwep support, banning, etc) and
the CTF tournament mode done soon as well.  Also, I'll be posting the changes
to the game DLL later (including the banning, etc).  3.15 does run all
3.14 Game DLLs, but don't have the new features.

I'll look at adding the ability for clients to control whether or not they 
download all the skins, maps, etc.  Right now it always downloads (if 
possible).  If you set cl_noskins 1, it won't download it, but that's not
very useful in CTF or other team based mods.

I invite feedback on this version.  If you have a comment, drop me a line
at zoid@idsoftware.com.  I can't reply to all the mail I get, but I do
read it all.  :)

/// Zoid.


May 25th/1998

I'm not one to post opinion pieces in my plan, but I guess there is a first
time for everything.

Recently I released QuakeWorld 2.2 (and the subsequent 2.21 to address some
bugs) with several changes.  I'd like to clear up some of the decisions for
those changes and some common problems people are having.

First off, one of the central features of the new version was to stop
cheating.  Map hacks, models hacks, etc.  Now, I was a little overgressive
and included the vis data in the map check.  A lot of people had different
map versions (mostly from watervis patches) and it showed.  This was
addressed in 2.21 which had map checking off by default, and when enabled,
checks don't include the vis data.

Some users are complaining that waterhack no longer works, and this is true
and by design.  GLQWCL users can not enabled transparent water unless the
server enables 'watervis 1', which then permits them.  This levels the
playing field for everyone.  I actually got email from a person who
complained that he bought GL just so he could see into the water on dm3
and kill the poor guys using software.  He stated he should have an advantage
because he paid more money to buy hardware to improve his game.  I don't
agree with this (GL already has an advantage in frame rate and looking
damn pretty).  But, this is server controlled, so he can just play on servers
that enabled 'watervis 1'.

The whole issue stems from the fact that Quake was never designed with
transparent water in mind.  And in multiplayer play, it really shouldn't be
there since it wasn't intended.  Also, the software renderer doesn't do
transparency with water surfaces and these causes a huge advantage
difference.  Waterhack works, but it's damn ugly.  The solution was to
disable transparent water for everyone and level the playing field.

Another change in QuakeWorld 2.2 was with friction code.  Regular Quake
defaulted to a friction of 4.  QuakeWorld 1.5 through 2.1 defaulted to 6.
This does change the feel of the game, since you slide a bit more with a
friction of four.  I made this change so that QuakeWorld would feel more
like regular Quake.  QuakeWorld was intended as a net optimized version of
Quake and should play the same, but have the advantages of prediction as
well.  That was always my goal and why I changed the movement code back in
1.64 to include ramp acceleration and air control that was present in Quake.

Note that server operators can control the friction!  They can set 
'sv_friction 6' in their server config files and keep the tight feel that
previous versions of QuakeWorld had.  It was only the default that changed.

Personally, I like the change.  I can play Regular Quake and QuakeWorld and
my movement feels the same, and on a LAN, I can't tell the difference ('cept
Regular Quake's crosshair is off. :)  That's the goal for me, to make the
games play the same.  It was a goal I started when I took over the QuakeWorld
project.

Some users were experiementing a slightly higher ping and packet loss
problems with this new version.  I tracked it down to the new checksumming
code I was using.  It was very CPU expensive and slowed both the server and
client down a bit (much more so on the server, tho).  2.21 uses a much more
efficient checksum code that should alleviate this problem.  A lot of
QuakeWorld servers are running on lower end hardware out there (P120, P133s,
etc) so when they got a lot of players on there, combined with the new
expensive checksumming, the server consumed a lot of CPU and started running
out and dropping packets.  Never saw it on my Dual PII-266 that I run the
test servers on.  But it's fixed now.

Another problem a lot of people are getting is an error from QWCL saying,
"The localid has not been set." when using GameSpy/QuakeSpy.  This is because
I had to change the way GameSpy and QWCL communicate due to a security
problem (It was an ugly problem, people could execute command on your qwcl
console remotely.  I'd like to publically spank Microsoft for allowing packets
spoofed with the local interface address as coming in over the ethernet
interface).  You get this error with earlier versions of GameSpy, because
it's not communicating the new info to qwcl.  GameSpy1.53 (included with QW)
and 2.0beta2 or later have this new functionality.  If you are still getting
it with those versions, check to see if you are running qwcl/glqwcl from a
batch file.  If so, make sure it passes parameters, like so:
	glqwcl  %1 %2 %3 %4 %5 %6 %7 %8 %9
in the batch file.

The reactions to the 2.2 version have been mixed.  Everyone, especially
server operators, should upgrade to 2.21 as it addresses a lot of the
problems that showed up in 2.2.  I hope I cleared up some of the choices I
made in 2.2.  I'm enjoying the new version, and I hope many other are, too.

Now, time for me to hack some more on Quake2.  Stuff is forthcoming. :)

/// Zoid.


May 23rd/1998

QuakeWorld 2.21 has been released that should address some of the problems in 
the previous release.  Players and server operators are STRONGLY urged to 
upgrade to this version since many of the new features in 2.2 have been updated 
and bugs have been fixed.

The 2.21 versions will interroprate with 2.20 versions, but with some
loss in performance.  So, yes you can play on a 2.20 server with 2.21, or play
with 2.20 on a 2.21 server, but you'll get the best gameplay and performance
using a 2.21 client on a 2.21 server.

Here's the files:

Full QuakeWorld Client including GameSpy 1.53 for Windows95/NT

Upgrade from 2.20 only (must have GameSpy 1.53 or 2.0beta2 installed) for Windows95/NT

QuakeWorld Server for Windows95/NT



QuakeWorld Client for i386 Linux 2.0

QuakeWorld Server for i386 Linux 2.0



QuakeWorld Server for Alpha Linux 2.0

QuakeWorld Server for Solaris x86 2.5.1

QuakeWorld Server for BSDI/i386 3.0

QuakeWorld Server for Solaris 2.5.1 on Sparc


/// Zoid.


May 17th/1998

I've been working all day on some of the problems in the 2.20 release. 

As with any major release, there is bound to be problems. I made some 
incorrect assumptions this time around, namely how many people had 
watervised their maps. This has certainly been causing problems for a 
lot of people. 

I'm working on 2.21. I hope to release it soon since there are some ugly 
bugs in 2.20 (such as random overflows on servers sometimes). There will 
be a server upgrade and a client one, but 2.20 clients and servers will 
be able to talk to 2.21, though I strongly recommend that everyone upgrade 
to 2.21 when it comes out. 

For watervised maps, vis data is no longer included in the map checksum. 
The 2.21 server turns off checksums BY DEFAULT. Server admins can 
enable map checksumming by typing 'sv_mapcheck 1'. This map checksum 
is almost the same as before, except that vis data is not included in 
the check. This means that maps that just has the vis/portal information 
changed (for watervis) will pass the checksum test. Maps with hacked 
textures, removed walls, or waterhack will not. 

Note, people believes this gives an advantage to GL users, and normally 
it would. But the server can control whether the GL user can turn on 
r_wateralpha (by setting it less than 1) or not using the watervis 
server variable. watervis 0 means that GL users can not enable 
transparent water, which levels the playing field. Quake was never really 
designed for transparent water and neither were the maps originally. 

So for admins that are using servers for strict competition should enable 
sv_mapcheck and leave watervis to 0 so that no one gets transparent water. 

There was a minor bug in the movement code as well. This bug was only 
really noticable on ctf4 up the steps to the rocket launcher. You sort 
of bounced up the steps. This has been fixed. 

There also seems to be an issues where the servers are consuming much 
more CPU than before. I think this may be related to some checksumming 
code I put in to defeat proxies. I'm changing these routines to use 
a more CPU friendly algorithm that should help on the servers. 

I'd like to apologize for some of the problems with this release. I can't 
please everyone, but I try to make the game as fun, secure and reliable 
as I can. QuakeWorld was meant to be a more net friendly version of 
Quake--that was it's goal. This is why I spent the time integrating 
movement code that matched the original Quake. I wanted to end the 
NQ/QW split that existed, since it doesn't serve anyones' best interest. 

Quake is a great game, and one I love to play just like everyone else. 

Common Problems and Solutions for 2.20
--------------------------------------

Q: I get a localid error and told I need to upgrade my browser, what 
is this?
A: You must use GameSpy 1.53 or 2.0beta2 with the new client.  This
was caused by some necessary changes for security reasons.

Q: I get a map checksum error.  It says my map doesn't match the server.
What is this?
A: You are using modified maps (such as watervis or waterhack) and 
because of this, your map doesn't match the one on the server.  Another
case is also when you have correct maps, but the server is using watervis
maps.  2.20 requires you to have the same map as the server.  For now,
it's probably best to stick to original maps (off your Quake CD) since
most server admins will be using the originals.  2.21 will address this
problem by having map checking off by default, and when enabled, not
including vis/portal information in the check.

Q: Some llama keeps pausing my game!  How do I stop this?
A: Pause is back in QW.  I put it in since it's very handy in 1on1
games and clan matches in case someone has a biological need or
other emergancy.  Server operators can disable pause by setting
"pausable 0" in the server.cfg file (or via console/rcon).
In 2.21, spectators can not pause the game.

Q: Water movement seems so slow!  Why did you change it?
A: Water friction was not probably implemented in QW.  The movement
code now reflects the original friction values of Quake.

Q: I keep getting overflow errors shortly after I connect to servers
running mods like QWRing.  If I try a few times, I eventually get in.
Why does this happen?
A: QWRing stuffs a lot of text at the client (almost 2K worth!). In
order for me to get it to work with 2.2 which has reduced packet
sizes for broken routers, I had to write some internal handling
for some of this data.  It mostly works, but there is a small bug
in it that seems to be randomly hit on signon.  2.21 servers will
fix this.

Q: My server seems to be using way more CPU than before.  I can't
run as many servers and when they max out, all my clients get
massive packet loss.
A: These seems to be related to some of the checksum code I put
in to defeat proxies mucking with stuff.  2.21 features a new
set of checksum codes that are much more CPU friendly.  Should
help out a lot.  I wish I could get more data on this, but
MSVC++5.0 just doesn't want to do a damn profile for me.

I hope that clears up some of the issues.  2.21 forthcoming.

/// Zoid.


May 16th/1998

I've released QuakeWorld 2.2.  I've also added a couple new ports for this 
release: Sun Solaris x86 and Linux Alpha for servers.  The new QuakeWorld 
should work through various broken routers that previous versions of 
QuakeWorld did not work with before.

QuakeWorld 2.2 is NOT COMPATIBLE with old versions (2.1 or earlier).

The changes focused on security, cheating and gameplay.  QW2.2 plays as
close as possible to the original Quake, but with the benefits of prediction.
My beta testers were very excited about the changes, and I hope everyone
will enjoy them.

Please note:  Team Fortress 2.6 currently doesn't work with QW2.2. The
Team Fortress team is aware of this and will be releasing a small patch
for servers ASAP.

As always, QuakeWorld is an unsupported product.  If you have any problems
tho, you can report them to bugs@quakeworld.net.

The release packages:

<a href="ftp://ftp.idsof